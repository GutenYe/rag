#!/usr/bin/env ruby

require_relative "../lib/rag"

# load Ragfile
if Pa.exists?("Ragfile")
	load "Ragfile"
end

# load tasks/*.rag
Pa.glob("tasks/*.rag") { |pa|
	load pa.path
}

begin
  Rag.start
rescue Rag::RagError => e
  Rag.ui.error e.message
  Rag.ui.debug e.backtrace.join("\n")
  exit 1
rescue Interrupt => e
  Rag.ui.error "\nQuitting..."
  Rag.ui.debug e.backtrace.join("\n")
  exit 1
end

